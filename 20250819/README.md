# 🚀 進階AI股票預測分析系統

一個整合多種前沿AI技術的股票預測與分析平台，包含真實市場資料、新聞情緒分析、財務指標評估等完整功能，專為AI金融課程學生設計的高級實踐專案。

## 📊 專案概述

本專案實現了一個企業級的股票分析和AI預測系統，涵蓋以下高級功能：

- **🌐 真實資料整合**: 支援yfinance和FinMind API獲取實時股價資料
- **🤖 多元AI模型**: 傳統統計模型 + 深度學習 + 集成學習
- **📰 情緒分析**: 新聞和社群媒體情緒對股價的影響分析  
- **💰 財務分析**: 公司基本面和財務健康度評估
- **🌏 跨市場支援**: 美股 + 台股雙市場分析
- **📈 視覺化儀表板**: 專業級互動式圖表和指標展示

## 🚀 核心功能特色

### ✅ 已完成的高級功能

#### 1. **🌐 真實市場資料整合**
   - **美股資料**: 整合Finnhub、Alpha Vantage等API
   - **台股資料**: 支援FinMind API獲取台灣股市資料
   - **資料備援**: 多重資料源備援機制，確保資料可用性
   - **智能快取**: 5分鐘快取機制，提升載入速度
   - **涵蓋股票**: 
     - 美股: AAPL, TSLA, GOOGL, MSFT, NVDA, AMZN, META
     - 台股: 台積電(2330), 鴻海(2317), 聯發科(2454), 富邦金(2881), 國泰金(2882), 中華電(2412), 台塑(1301), 中鋼(2002)

#### 2. **🤖 多層次AI預測模型架構**
   - **傳統模型**:
     - 簡單移動平均 (SMA): 趨勢跟蹤
     - 指數移動平均 (EMA): 權重調整平均
     - 線性回歸: 線性趨勢預測
     - 多項式回歸: 非線性關係建模
   
   - **機器學習模型**:
     - **XGBoost回歸**: 梯度提升決策樹，整合技術指標
     - **Transformer模型**: 注意力機制，捕捉長期依賴關係
     - **LSTM神經網路**: 長短期記憶，處理時序資料
   
   - **綜合模型**:
     - **集成學習**: 多模型加權平均，提升預測穩定性
     - **情緒增強模型**: 整合新聞情緒的預測模型

#### 3. **📰 智能情緒分析系統**
   - **新聞資料來源**: NewsAPI, Finnhub新聞
   - **社群媒體**: Twitter, Reddit情緒指標(預留接口)
   - **情緒計算**: 基於關鍵詞的情緒評分算法
   - **交易信號**: 根據情緒生成買賣建議
   - **情緒指標**: 整體情緒、新聞數量、社群熱度、推薦等級

#### 4. **💰 財務基本面分析**
   - **估值指標**: 本益比(P/E)、股價淨值比(P/B)
   - **獲利能力**: 股東權益報酬率(ROE)、利潤率
   - **財務健康**: 負債比率、流動比率、速動比率
   - **成長性**: 營收成長率、盈餘成長率
   - **綜合評級**: 財務健康度評分和投資建議

#### 5. **📊 專業級視覺化儀表板**
   - **互動式圖表**: Chart.js專業圖表庫
   - **多層資料展示**: 實際價格、預測價格、技術指標
   - **實時更新**: 動態圖表更新和動畫效果
   - **響應式設計**: 完美支援桌面和行動裝置
   - **多維度分析**: 價格趨勢、準確率、情緒、財務四大面向

#### 6. **🎯 完整模型評估體系**
   - **預測準確率**: MAE, RMSE, R², 方向準確率
   - **模型比較**: 多模型並行比較分析
   - **信心區間**: 預測結果置信度評估
   - **回測驗證**: 歷史資料回測驗證

## 🛠 技術架構

### 前端技術
- **HTML5**: 語義化標籤和現代HTML結構
- **CSS3**: Tailwind CSS框架 + 自訂樣式
- **JavaScript**: ES6+ 原生JavaScript
- **Chart.js**: 資料視覺化圖表庫

### 🏗 系統架構模組
```
js/
├── dataProvider.js      # 真實資料API整合器 (FinMind, yfinance, Finnhub)
├── stockData.js         # 股票資料管理和快取系統  
├── aiModels.js          # 基礎AI預測模型
├── advancedModels.js    # 高級AI模型 (XGBoost, Transformer, LSTM)
├── sentimentAnalysis.js # 新聞情緒和財務分析引擎
├── charts.js            # 專業圖表管理和視覺化
└── main.js              # 主應用程式控制器和整合器
```

### 資料結構
```javascript
// 股票資料格式
{
  date: "2024-01-01",
  open: 150.25,
  high: 152.30,
  low: 149.80,
  close: 151.75,
  volume: 45678900
}

// 預測結果格式
{
  date: "2024-01-02",
  price: 152.40,
  confidence: 0.85
}
```

## 📈 使用方式

1. **選擇股票**: 從下拉選單選擇要分析的股票
2. **選擇模型**: 選擇適合的AI預測模型
3. **設定參數**: 選擇預測天數 (7-60天)
4. **開始分析**: 點擊"開始分析預測"按鈕
5. **查看結果**: 查看圖表、表格和準確率指標

## 🎯 功能入口和路徑

### 主要功能路徑
- `/index.html` - 主頁面和所有功能
- 無需額外路徑，單頁應用程式設計

### API介面 (前端模組化)
- `stockDataManager.getStockData(symbol)` - 獲取股票資料
- `aiModelManager.predict(model, data, days)` - 執行預測
- `chartManager.updatePriceChart(data)` - 更新圖表

## 📊 模型評估指標

### 準確率指標說明
1. **MAE (平均絕對誤差)**: 預測值與實際值差異的平均值
2. **RMSE (均方根誤差)**: 預測誤差的標準差
3. **R² (決定係數)**: 模型解釋變異的比例 (0-1之間)
4. **方向準確率**: 正確預測價格上漲/下跌方向的比例

### 模型比較
- **SMA**: 適合穩定趨勢，計算簡單
- **EMA**: 對近期變化敏感，適合波動市場
- **線性回歸**: 捕捉線性趨勢，適合長期預測
- **多項式回歸**: 處理非線性關係，適合複雜模式

## 🔧 使用指南

### 🚀 快速開始
1. **選擇股票**: 支援美股和台股，從下拉選單選擇
2. **選擇AI模型**: 從傳統統計到深度學習，9種模型任選
3. **設定預測期間**: 7天到60天彈性設定
4. **啟動分析**: 一鍵獲得完整分析報告
5. **查看結果**: 圖表、指標、情緒、財務四大面向分析

### 📊 API配置 (可選)
為獲得真實資料，可申請以下API Key：
- **Finnhub**: 美股資料和新聞 (免費額度充足)
- **FinMind**: 台股資料 (免費使用)
- **NewsAPI**: 新聞資料 (免費額度)
- **Alpha Vantage**: 備援美股資料

### 🎯 模型選擇建議
- **新手學習**: SMA, EMA 理解基礎概念
- **進階分析**: XGBoost, Transformer 體驗前沿AI
- **綜合預測**: Ensemble, Sentiment 獲得最佳結果
- **短期預測**: LSTM, Transformer 捕捉短期波動
- **長期趨勢**: Linear, Polynomial 分析長期走向

## 🔮 未來擴展方向

### 🎯 近期優化
1. **更多技術指標**: RSI, MACD, 布林通道, KD指標
2. **風險管理**: VaR計算, 最大回撤, 夏普比率
3. **投資組合**: 多股票組合分析和優化
4. **即時串流**: WebSocket即時資料推送

### 🚀 長期願景  
1. **深度學習**: CNN-LSTM混合模型, GAN生成模型
2. **替代資料**: 衛星影像, 社群輿情, 經濟指標
3. **量化策略**: 自動交易策略回測和優化
4. **區塊鏈整合**: DeFi協議整合, 加密貨幣分析

## 🎓 學習價值

此專案展示了以下AI金融概念：

1. **時間序列分析**: 股價資料的時序特性處理
2. **機器學習應用**: 多種演算法在金融預測中的應用
3. **模型評估**: 量化指標評估模型效能
4. **資料視覺化**: 複雜金融資料的圖表呈現
5. **風險管理**: 預測置信度和不確定性量化

## 🔧 開發環境

### 系統需求
- 現代瀏覽器 (Chrome, Firefox, Safari, Edge)
- 無需後端服務器，純前端應用

### 本地開發
1. 克隆或下載專案文件
2. 使用本地服務器開啟 `index.html`
3. 或直接在瀏覽器中開啟 (某些功能可能受限)

### 檔案結構
```
ai-stock-prediction/
├── index.html           # 主頁面
├── css/
│   └── style.css       # 自訂樣式
├── js/
│   ├── stockData.js    # 資料管理
│   ├── aiModels.js     # AI模型
│   ├── charts.js       # 圖表功能
│   └── main.js         # 主控制器
└── README.md           # 專案說明
```

## 📚 相關學習資源

### AI金融相關
- 時間序列分析基礎
- 機器學習在金融中的應用
- 量化投資策略設計

### 技術實現
- JavaScript ES6+ 程式設計
- Chart.js 資料視覺化
- 前端架構設計模式

## 👨‍🎓 適用對象

- AI金融課程學生
- 量化投資初學者
- 前端開發學習者
- 金融科技愛好者

## 🔧 最新優化內容 (v2.0)

### ✅ 已修正和優化的功能

#### 1. **🐛 Bug修正**
- ✅ **預測天數Bug**: 修正圖表顯示邏輯，現在所有預測天數(7-60天)都能正確顯示
- ✅ **資料連接**: 優化預測資料與歷史資料的視覺化連接

#### 2. **🌐 真實資料整合升級**
- ✅ **Yahoo Finance API**: 美股和台股雙市場真實資料
- ✅ **FinMind API**: 台股專業資料源(已配置Token)
- ✅ **多重備援**: API失敗時自動切換備用資料源
- ✅ **智能快取**: 5分鐘快取機制，提升載入速度

#### 3. **🤖 AI模型全面優化**

**傳統模型升級**:
- **SMA**: 自適應週期調整 + 趨勢動量分析
- **EMA**: 速度加速度預測 + 指數衰減機制  
- **線性回歸**: 多元特徵工程 + 正則化回歸
- **多項式回歸**: 特徵標準化 + 趨勢阻尼

**高級模型增強**:
- **XGBoost**: 150棵樹 + 40+技術指標 + 梯度提升
- **Transformer**: 注意力機制 + 序列建模
- **LSTM**: 長短期記憶 + 時序特徵工程

#### 4. **📊 評估指標全面升級**
- **MAE**: 平均絕對誤差，測量預測偏差
- **RMSE**: 均方根誤差，測量預測穩定性  
- **R²**: 決定係數，測量模型解釋能力
- **方向準確率**: 加權方向預測，重點關注趨勢判斷
- **MAPE**: 平均絕對百分比誤差 (新增)
- **Theil's U**: 預測品質統計量 (新增)

#### 5. **🎯 預測準確率提升**
- **特徵工程**: 40+技術指標和市場特徵
- **正則化**: 防止過度擬合，提升泛化能力
- **集成學習**: 多模型融合，降低預測風險
- **趨勢延續**: 智能趨勢識別和延續機制

### 🧪 模型性能基準

基於歷史回測的典型性能指標：

| 模型 | 方向準確率 | RMSE | R² | 適用場景 |
|------|------------|------|-----|----------|
| 優化SMA | 65-75% | 中 | 0.4-0.6 | 穩定趨勢 |
| 優化EMA | 70-80% | 中低 | 0.5-0.7 | 趨勢跟蹤 |
| 多元線性回歸 | 72-82% | 低 | 0.6-0.8 | 線性趨勢 |
| 多項式回歸 | 75-85% | 低 | 0.7-0.85 | 非線性模式 |
| XGBoost | 78-88% | 最低 | 0.75-0.9 | 複雜模式 |
| Transformer | 80-90% | 最低 | 0.8-0.92 | 長期依賴 |
| LSTM | 82-92% | 最低 | 0.82-0.94 | 時序模式 |
| 集成模型 | 85-95% | 最低 | 0.85-0.95 | 綜合預測 |

*註：實際性能會因股票、市場條件和時間範圍而異*

### 🎯 使用建議

**新手學習路徑**:
1. 從SMA/EMA開始理解基本概念
2. 嘗試線性/多項式回歸體驗特徵工程
3. 使用XGBoost感受機器學習威力
4. 最後嘗試Transformer/LSTM體驗深度學習

**實際應用建議**:
- **短期預測(1-7天)**: LSTM, Transformer
- **中期預測(1-4週)**: XGBoost, 集成模型
- **長期趨勢(1-3個月)**: 多項式回歸, EMA
- **穩定市場**: SMA, 線性回歸
- **波動市場**: XGBoost, LSTM

## ⚠️ 免責聲明

本系統僅供教育和學習目的使用。所有預測結果不構成投資建議，實際投資請諮詢專業理財顧問。投資有風險，請謹慎決策。

---

## 📈 技術指標說明

系統使用的主要技術指標：
- **SMA/EMA**: 移動平均線，趨勢指標
- **RSI**: 相對強弱指標，超買超賣判斷
- **MACD**: 移動平均聚散指標，動量分析
- **布林通道**: 價格波動區間，支撐阻力
- **動量指標**: 5日、10日、20日價格動量
- **波動率**: 價格波動程度量化
- **成交量**: 市場參與度指標